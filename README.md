# k8s_vunerabilty_scan
Déploiement d'un Job Kubernetes pour réaliser un scan de vulnérabilité des images en cours d'execution dans un cluster à l'aide trivy.
Les rapports générés sont ensuite envoyés dans un bucket S3.  
Un rapports par namespaces est générés. Ce rapport  contient le résultat des scans de chaques images du Namespaces. 

# Mise en place
il faut compléter le fichier minio_secret qui contriendra l'access et la secret key pour se connecter à Minio. 

minio_secret
```
access_key=
secret_key=
```
il faut aussi compléter un fichier minio_info, qui contiendra les informations de Minio

minio_secret
```
endpoint_url=
bucket_name=
```
endoint_url correspond à l'url d'accès à l'api S3
bucket_name correspond au nom du bucket ou stocker les reportings. 
> le bucket doit etre créer au préalable 

déploiement de l'ensemble des briques
```
kubectl create -k .
```